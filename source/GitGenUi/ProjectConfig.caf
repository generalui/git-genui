import &StandardImport, {} &path

class ProjectConfig extends &ConfigShared
  @singletonClass()

  @configBasename: :git-genui.config.json
  @sourceRootIndicatorFiles:
    :.git
    @configBasename

  @getter
    project: -> @config.project

  @classGetter
    configFilePathPromise: -> @repoRootPromise.then (dir) -> &path.join dir, @configBasename
    repoRootPromise: -> @_repoRoot ?= Promise.then ->
      new SourceRoots @sourceRootIndicatorFiles
      .findSourceRoot process.cwd()
