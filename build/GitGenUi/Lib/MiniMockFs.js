"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["clone", "Promise", "Error"], [global, require('art-standard-lib')], (clone, Promise, Error) => {return {createMockFs: (initialFiles = {}) => {let mockFiles, readFile, readFileSync; mockFiles = clone(initialFiles); return {getTree: () => mockFiles, writeFile: (filePath, data) => {let dir, splitPath; dir = mockFiles; Caf.each2(splitPath = filePath.split("/"), (p, i) => dir = dir[p] = (i === splitPath.length - 1) ? data : dir[p] || {}); return Promise.resolve(data);}, readFile: readFile = (filePath) => Promise.then(() => readFileSync(filePath)), exists: (filePath) => readFile(filePath).then(() => true).catch(() => false), readFileSync: readFileSync = (filePath) => {let dir, splitPath; dir = mockFiles; Caf.each2(splitPath = filePath.split("/"), (p) => dir = Caf.exists(dir) && dir[p]); return (dir != null) ? dir : (() => {throw new Error();})();}};}};});});
//# sourceMappingURL=MiniMockFs.js.map
