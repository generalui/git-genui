import &CommitStateLib
&source

test 'getCommitComment' ->
  expect getCommitComment {}
  .toMatch
    /// git-genui .* v \d+\. \d+\. \d+

test 'getCommitComment' ->
  expect getCommitComment {}
    generatedCommitMessage = "my-commit-message"
    storyState =             "finished"
    branch =                 "feature/fun"
    commit =                 "abc123"
    remote =
      name: :origin
      refs:
        fetch: :git@github.com:generalui/git-genui.git
        push:  :git@github.com:generalui/git-genui.git

    coauthors =              "William"

  .toMatch
    ///
      #{storyState}
      (.|\n)*#{commit}
      (.|\n)*#{branch}
      (.|\n)*#{remote.refs.fetch}
      (.|\n)* #{generatedCommitMessage}
      (.|\n)*git-genui
      (.|\n)* v \d+\. \d+\. \d+
